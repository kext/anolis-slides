<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Slides</title>
  <link rel="stylesheet" href="assets/style.css"/>
  <script defer src="assets/script.js"></script>
</head>
<body>
  <div class="slide">
    <div class="content center">
      <h1>Anolis Brain Interface</h1>
      <p>Lukas Joeressen</p>
      <p>February 2024</p>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Problem</h2>
      <div class="flow">
        <ul>
          <li>Anolis lizards have a comparable brain physiology to mammals</li>
          <li>This makes them an interesting study target</li>
          <li>Measure brain signals in Anolis lizards</li>
          <li>Have a wearable system that lets the animal move freely</li>
          <li>The animal should be disturbed as little as possible</li>
          <li>Display and collect data in real-time over a wireless connection</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Goal</h2>
      <div class="flow">
        <ul>
          <li>Develop a system for Bluetooth communication</li>
          <li>Maximise achievable data bandwidth</li>
          <li>Real-time data display and recording</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Stretch Goals</h2>
      <div class="flow">
        <ul>
          <li>Build the complete system</li>
          <li>Get as small and light as possible</li>
          <li>Test the system in a lab setting</li>
          <li>Test with real signals</li>
          <li>Test with the actual animals</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <img class="right" src="img/ryan-arnst-n9rGa3MAZhk-unsplash.jpg" alt="Green anole"/>
    <div class="content left">
      <h2>The Lizards</h2>
      <div class="flow">
        <ul>
          <li>Green anole lizards<br/><em>Anolis carolinensis</em></li>
          <li>Extremely tiny</li>
          <li>3-7g</li>
          <li>12-20cm</li>
          <li>More than half of that is the long tail</li>
          <li>Keep system under 2g!</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Image: Ryan Arnst/Unsplash</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Hardware</h2>
      <div class="flow">
        <div class="float">
          <img src="img/pcb.jpg" alt="PCB Top Side" style="width:8em;"/><br/>
          <img src="img/pcb-battery.jpg" alt="PCB Bottom Side" style="width:8em;"/>
        </div>
        <ul>
          <li>Designed with KiCad</li>
          <li>Flexible PCB</li>
          <li>Rechargeable 40mAh LiPo battery</li>
          <li>Compact size (14x18mm)</li>
          <li>As light as possible (1.71g with battery)</li>
          <li>Analogue frontend (RHD2216)</li>
          <li>Processor and Bluetooth antenna (Setebos-I)</li>
          <li>Power supply and battery charging</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Intan RHD2216</h2>
      <div class="flow">
        <div class="float">
          <img src="img/rhd.jpg" alt="RHD2000" style="width: 10em;"/>
          <div class="caption">Image: Intan Technologies</div>
        </div>
        <ul>
          <li>Integrated analogue frontend for electrophysiological signals</li>
          <li>16 differential input channels</li>
          <li>Integrated ADC</li>
          <li>SPI interface</li>
          <li>No internal clock</li>
          <li>Configurable filters</li>
          <li>Up to 30kHz sample rate with 16 bit</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The nRF52840 SoC</h2>
      <div class="flow">
        <div class="float">
          <img src="img/nordic.svg" alt="Nordic Semiconductor" style="margin-bottom:0.5em;width:6em;"/><br/>
          <img src="img/nrf52840-wlcsp.webp" alt="nRF52840" style="width:6em;"/>
        </div>
        <ul>
          <li>Nordic Semiconductor</li>
          <li>ARM Cortex M4F CPU</li>
          <li>64MHz</li>
          <li>256kB RAM</li>
          <li>1MB Flash</li>
          <li>Bluetooth Radio</li>
          <li>Many Hardware Peripherals<br/>(SPI, Timer, DMA, PPI, USB, ...)</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Embassy Project</h2>
      <div class="flow">
        <img src="img/rust.svg" alt="Rust" class="float" style="height: 4em;"/>
        <ul>
          <li>Free &amp; Open Source &ndash; We contributed!</li>
          <li>Written in the Rust programming language</li>
          <li>Enables Rustâ€™s async/await feature</li>
          <li>Portable hardware abstraction for a wide variety of chips</li>
          <li>Supports nRF52840 with Bluetooth softdevice</li>
          <li>Safe and convenient APIs</li>
        </ul>
        <p>Learn more: <a href="https://embassy.dev/">https://embassy.dev/</a></p>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The RHD2216 Driver</h2>
      <div class="flow">
        <ul>
          <li>Generates a steady command stream</li>
          <li>Timer connected with SPI, counter and DMA via PPI</li>
          <li>Double buffer with overflow space</li>
          <li>Only buffer swap every 20ms needs CPU interaction</li>
          <li>Since buffer swap happens during DMA operation the swap routine is written with inline assembly and the LDREX/STREX instructions</li>
          <li>This prevents lost samples or memory corruption</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Bluetooth connection</h2>
      <div class="flow">
        <div class="float">
          <img src="img/bluetooth.svg" alt="Bluetooth" style="width: 8em;"/>
        </div>
        <ul>
          <li>BLE 5 with 2M PHY for higher data rate</li>
          <li>L2CAP connection oriented channels</li>
          <li>Advertisement with specific 128 bit UUID</li>
          <li>Bluetooth dongle searches for this UUID and connects</li>
          <li>A complete data frame is sent every 20ms</li>
          <li>Dongle forwards the data to the USB connection</li>
          <li>Tested with 16 channels and up to 10kHz sample rate</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Interface</h2>
      <div class="flow">
        <div class="float">
          <img src="img/recording.jpg" alt="Interface" style="width:15em;"/>
        </div>
        <ul>
          <li>Built with Vue.js</li>
          <li>Runs in a normal web browser</li>
          <li>Uses the WebUSB API</li>
          <li>Displays data in real-time</li>
          <li>Records data to a file</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>The Results</h2>
      <div class="flow">
        <div class="float">
          <img src="img/ecg.png" alt="ECG Signal of a Human Heart" style="width: 13em;"/>
        </div>
        <ul>
          <li>Testing in the lab has been successful with 8 channels and 10kHz sample rate</li>
          <li>We have also tested the device by measuring a human ECG signal</li>
          <li>Testing on the animals is ongoing</li>
          <li>Main problem is the attachment of the system and the electrodes to the lizard</li>
          <li>A 3D printed harness is in development</li>
        </ul>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content">
      <h2>Get the Code</h2>
      <div class="flow">
        <p>The code and PCB production files are available on Github under the free and open source MIT and Apache 2.0 licences.</p>
        <p><a href="https://github.com/kext/anolis-brain-interface">https://github.com/kext/anolis-brain-interface</a></p>
        <p>You can find the slides here:</p>
        <p><a href="https://kext.github.io/anolis-slides">https://kext.github.io/anolis-slides</a></p>
      </div>
      <footer>
        <div class="pagenumber"></div>
        <div>Lukas Joeressen</div>
      </footer>
    </div>
  </div>
  <div class="slide">
    <div class="content center">
      <p>Thank you for your attention!</p>
      <p>Any questions?</p>
    </div>
  </div>
</body>
</html>
